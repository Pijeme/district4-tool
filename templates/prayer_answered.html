{% extends "base.html" %}
{% block title %}Answered Prayers - District 4 Tool{% endblock %}

{% block content %}
<section class="card">
  <div style="display:flex; align-items:flex-start; justify-content:space-between; gap:14px; flex-wrap:wrap;">
    <div>
      <h2 style="margin-bottom:6px;">Answered Prayer Request</h2>
      <p class="muted small" style="margin:0;">
        Requests you marked as answered. Shows requested date and answered date.
      </p>
    </div>

    <div style="display:flex; gap:10px; flex-wrap:wrap;">
      <a href="/prayer-request/status" class="btn-secondary">Prayer Status</a>
      <a href="/prayer-request" class="btn-secondary">← Back</a>
    </div>
  </div>

  {% if answered and answered|length > 0 %}
    <div style="margin-top:12px;">
      {% for r in answered %}
        <div class="card" style="margin-top:12px; border:2px solid #111;">
          <details>
            <summary style="cursor:pointer; list-style:none;">
              <div style="display:flex; justify-content:space-between; align-items:center; gap:10px; flex-wrap:wrap;">
                <div>
                  <div style="font-weight:900;">{{ r.title }}</div>
                  <div class="muted small">
                    Requested: {{ r.request_date }} • Answered: {{ r.answered_date or '—' }}
                  </div>
                </div>
                <span style="padding:6px 10px; border-radius:999px; border:1px solid #1a4a7f; background:#d7ebff; font-weight:800; font-size:12px;">Answered</span>
              </div>
            </summary>

            <div style="margin-top:12px;">
              <div class="small" style="white-space:pre-wrap;">{{ r.request_text }}</div>

              <div class="small muted" style="margin-top:10px;">
                <b>Pastors Praying:</b>
                {% if r.pastors_praying %}
                  {{ r.pastors_praying }}
                {% else %}
                  —
                {% endif %}
              </div>
            </div>
          </details>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="card" style="margin-top:12px;">
      <div class="muted">No answered prayers yet.</div>
    </div>
  {% endif %}
</section>
{% endblock %}
